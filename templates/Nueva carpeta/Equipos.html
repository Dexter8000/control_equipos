<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inventario de Equipos</title>
    <link rel="stylesheet" href="/static/inventario.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>üì¶ Inventario de Equipos</h1>
            <div class="controls">
                <div class="search-container">
                    <input type="text" class="search-input" placeholder="Buscar equipo...">
                    <button class="search-btn">üîç</button>
                </div>
                <div class="view-options">
                    <button class="export-btn">üìÑ Exportar CSV</button>
                    <button class="toggle-view">üìä Vista Alterna</button>
                </div>
            </div>
        </header>

        <!-- Tabla de Inventario -->
        <div class="table-container">
            <table id="inventory-table">
                <thead>
                    <tr>
                        <th class="fixed">ID</th>
                        <th class="fixed">Nombre</th>
                        <th>Marca</th>
                        <th>Modelo</th>
                        <th>Serie</th>
                        <th>Categor√≠a</th>
                        <th>Subcategor√≠a</th>
                        <th>Fecha de Adquisici√≥n</th>
                        <th>Garant√≠a Hasta</th>
                        <th>Ubicaci√≥n</th>
                        <th>Ubicaci√≥n Espec√≠fica</th>
                        <th>Estado</th>
                        <th>Condici√≥n</th>
                        <th>Responsable Actual</th>
                        <th>Tipo de Adquisici√≥n</th>
                        <th>Mantenimiento Programado</th>
                        <th>ID Departamento Asignado</th>
                        <th>Historial de Mantenimientos</th>
                        <th>Pr√©stamo Actual ID</th>
                        <th>Notas</th>
                        <th>Fecha de Creaci√≥n</th>
                        <th>Fecha de √öltima Actualizaci√≥n</th>
                        <th>Perif√©ricos</th>
                    </tr>
                </thead>
                <tbody id="inventory-body">
                    <!-- Las filas se generar√°n din√°micamente con JS -->
                </tbody>
            </table>
        </div>

        <!-- Formulario para agregar nuevos equipos -->
        <form id="add-equipment-form" class="modern-form">
            <div class="form-columns">
                <fieldset class="form-section">
                    <legend>üìã Datos Generales</legend>
                    <input type="text" name="id" placeholder="INV001" pattern="INV\\d{3}" required>
                    <input type="text" name="nombre" placeholder="Nombre" required>
                    <input type="text" name="marca" placeholder="Marca" required>
                    <input type="text" name="modelo" placeholder="Modelo" required>
                    <input type="text" name="serie" placeholder="Serie" required>
                    <input type="text" name="categoria" placeholder="Categor√≠a" required>
                    <input type="text" name="subcategoria" placeholder="Subcategor√≠a" required>
                </fieldset>

                <fieldset class="form-section">
                    <legend>üìÖ Fechas</legend>
                    <input type="date" name="fecha_adquisicion" required>
                    <input type="date" name="garantia_hasta" required>
                    <input type="date" name="mantenimiento_programado">
                    <input type="datetime-local" name="fecha_creacion" required>
                    <input type="datetime-local" name="fecha_ultima_actualizacion" required>
                </fieldset>

                <fieldset class="form-section">
                    <legend>üìç Ubicaci√≥n</legend>
                    <input type="text" name="ubicacion" placeholder="Ubicaci√≥n" required>
                    <input type="text" name="ubicacion_especifica" placeholder="Ubicaci√≥n Espec√≠fica" required>
                    <input type="text" name="responsable_actual" placeholder="Responsable" required>
                    <select name="estado" required>
                        <option value="activo">Activo</option>
                        <option value="inactivo">Inactivo</option>
                    </select>
                    <select name="condicion" required>
                        <option value="nuevo">Nuevo</option>
                        <option value="usado">Usado</option>
                    </select>
                    <select name="tipo_adquisicion" required>
                        <option value="compra">Compra</option>
                        <option value="donaci√≥n">Donaci√≥n</option>
                    </select>
                    <input type="text" name="id_departamento_asignado" placeholder="ID Departamento" required>
                    <input type="text" name="prestamo_actual_id" placeholder="Pr√©stamo Actual ID (opcional)">
                </fieldset>
            </div>

            <fieldset class="form-section">
                <legend>üìù Notas y Mantenimiento</legend>
                <textarea name="notas" placeholder="Notas"></textarea>
                <textarea name="historial_mantenimientos" placeholder="Historial de Mantenimientos (JSON)"></textarea>
            </fieldset>

            <fieldset class="form-section peripherals-section">
                <legend>üñ•Ô∏è Perif√©ricos</legend>
                <button type="button" id="add-peripheral-btn">‚ûï Agregar Perif√©rico</button>
                <div id="peripherals-list"></div>
            </fieldset>

            <div class="form-actions">
                <button type="submit" class="submit-btn">üöÄ Guardar Equipo</button>
            </div>
        </form>

        <div class="acciones">
            <a href="/dashboard">‚Üê Volver al Dashboard</a>
        </div>
    </div>

    <!-- ‚úÖ Pasar datos de Python a JavaScript -->
    <script>
        const inventario = {{ inventario | tojson | safe }};
    </script>    
    
    <script src="/static/inventario.js"></script>
</body>
</html>

